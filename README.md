# æ™ºå­¦ OS (Home-Learning-OS) ğŸ“

> å®¶åº­æ™ºèƒ½å­¦ä¹ ç³»ç»Ÿ | åŸºäº Google Gemini 3 + AnythingLLM æ„å»ºçš„ä¸ªæ€§åŒ–æ•™è‚²æ•°å­—åŒ–è§£å†³æ–¹æ¡ˆ

**æ™ºå­¦ OS** æ˜¯ä¸€ä¸ªä¸“ä¸ºå®¶åº­æ•™è‚²åœºæ™¯è®¾è®¡çš„å…¨æ ˆ Web åº”ç”¨ã€‚å®ƒåˆ©ç”¨ **Google Gemini 3** çš„å¤šæ¨¡æ€èƒ½åŠ›å’Œ **AnythingLLM** çš„å‘é‡æ£€ç´¢æŠ€æœ¯ï¼Œå°†ä¼ ç»Ÿçš„çº¸è´¨å­¦ä¹ èµ„æ–™æ•°å­—åŒ–ï¼Œå¹¶åŸºäºå­¦ç”Ÿçš„å­¦ä¹ æ•°æ®ç”Ÿæˆä¸ªæ€§åŒ–çš„å­¦ä¹ å†…å®¹å’Œæµ‹éªŒã€‚

---

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### 1. å¤šè§’è‰²é€»è¾‘éš”ç¦» (Multi-Profile)
- æ”¯æŒå¤šå­å¥³å®¶åº­ï¼ˆå¦‚ï¼šå¤§å®ã€äºŒå®ï¼‰
- æ•°æ®å®Œå…¨éš”ç¦»ï¼šæ¯ä¸ªå­©å­çš„é”™é¢˜ã€ç¬”è®°ã€å›¾ä¹¦ã€å­¦ä¹ è¿›åº¦ç‹¬ç«‹å­˜å‚¨
- å¿«é€Ÿåˆ‡æ¢èº«ä»½ï¼šé¡¶éƒ¨/ä¾§è¾¹æ ä¸€é”®åˆ‡æ¢å½“å‰å­¦ç”Ÿè§†è§’
- å®¶åº­å…±äº«èµ„æºï¼šæ”¯æŒæ•™æã€å‚è€ƒä¹¦ç­‰èµ„æºå…±äº«

### 2. æ™ºèƒ½æ‹é¢˜å½•å…¥ (AI Capture & OCR)
- **å¼•æ“**: `gemini-3-flash-preview` (Vision)
- **åŠŸèƒ½**:
  - è‡ªåŠ¨è¯†åˆ«å›¾ç‰‡ç±»å‹ï¼ˆæ•™æã€ç¬”è®°ã€é”™é¢˜ã€è¯•å·ï¼‰
  - é«˜ç²¾åº¦ OCRï¼šå®Œç¾è¿˜åŸæ•°å­¦å…¬å¼ (LaTeX)ã€ä¿ç•™åŸæ–‡æ’ç‰ˆ
  - ç»“æ„åŒ–æå–ï¼šè‡ªåŠ¨æå–å­¦ç§‘ã€ç« èŠ‚çº¿ç´¢ã€çŸ¥è¯†ç‚¹ã€æ ‡ç­¾
  - å››å±‚æå–åè®®ï¼šåŸå§‹å†…å®¹ â†’ çº¢ç¬”æ‰¹æ³¨ â†’ å­¦ç”Ÿè¡Œä¸º â†’ è®¢æ­£é—­ç¯

### 3. ğŸ“š å›¾ä¹¦é¦†æ¨¡å— (Library Hub)
- **ç”µå­ä¹¦ç®¡ç†**:
  - æ”¯æŒä¸Šä¼  PDF/EPUB/TXT æ ¼å¼ï¼ˆæœ€å¤§ 100MBï¼‰
  - AI è‡ªåŠ¨æå–å…ƒæ•°æ®ï¼šä¹¦åã€ä½œè€…ã€å­¦ç§‘ã€ç±»åˆ«ã€å¹´çº§ã€æ ‡ç­¾
  - æ™ºèƒ½è¯†åˆ«ç« èŠ‚ç›®å½•ç»“æ„ï¼ˆä¸‰çº§ç›®å½•æ ‘ï¼‰
  - ç”¨æˆ·å¯æ‰‹åŠ¨ç¼–è¾‘æ‰€æœ‰å…ƒæ•°æ®
- **æ™ºèƒ½ç´¢å¼•**:
  - è‡ªåŠ¨å‘é‡åŒ–å›¾ä¹¦å†…å®¹åˆ° AnythingLLM
  - æ”¯æŒè¯­ä¹‰æœç´¢å’Œ RAG æ£€ç´¢
- **æœ¬åœ°å­˜å‚¨**:
  - ä½¿ç”¨ IndexedDB å­˜å‚¨å›¾ä¹¦æ•°æ®
  - æ•°æ®å®Œå…¨åœ¨æœ¬åœ°ï¼Œä¿æŠ¤éšç§
- **åˆ†ç±»ç­›é€‰**:
  - æŒ‰å­¦ç§‘ã€ç±»åˆ«ã€å¹´çº§ç­›é€‰
  - å…¨æ–‡æœç´¢ï¼ˆä¹¦åã€ä½œè€…ã€æ ‡ç­¾ï¼‰

### 4. ğŸŒ± AI å­¦ä¹ å›­åœ° (Study Room)
- **ä¸‰æ­¥éª¤å­¦ä¹ æµç¨‹**:
  1. **é€‰æ‹©ç« èŠ‚**: ä¸‰çº§ç›®å½•æ ‘é€‰æ‹©å™¨ï¼Œç²¾å‡†å®šä½å­¦ä¹ å†…å®¹
  2. **ç”Ÿæˆè¯¾ä»¶**: AI æ ¹æ®æ•™æå†…å®¹ + å†å²é”™é¢˜ç”Ÿæˆä¸ªæ€§åŒ–è¯¾ä»¶
  3. **é…å¥—æµ‹éªŒ**: è‡ªåŠ¨ç”Ÿæˆæµ‹éªŒé¢˜ï¼ˆæ¯çŸ¥è¯†ç‚¹ 2 é“åŸºç¡€ + 1 é“æé«˜ï¼‰

- **å››ç§æ•™å­¦é£æ ¼**:
  - ä¸¥è°¨è®²è§£ï¼ˆç³»ç»Ÿå®Œæ•´ï¼Œé€»è¾‘ä¸¥å¯†ï¼‰
  - æ•…äº‹åŒ–ï¼ˆç”ŸåŠ¨å½¢è±¡ï¼Œè¶£å‘³æ€§å¼ºï¼‰
  - å®è·µå¯¼å‘ï¼ˆå¤§é‡ä¾‹é¢˜ï¼Œè¾¹å­¦è¾¹ç»ƒï¼‰
  - æ¢ç©¶å¼ï¼ˆå¯å‘æ€è€ƒï¼ŒåŸ¹å…»æ¢ç´¢ç²¾ç¥ï¼‰

- **æ™ºèƒ½æ¨è**:
  - åŸºäº RAG æ£€ç´¢ç›¸å…³é”™é¢˜
  - é’ˆå¯¹æ€§åŠ å¼ºè–„å¼±çŸ¥è¯†ç‚¹
  - æ”¯æŒ Markdown è¯¾ä»¶ä¸‹è½½

### 5. æ•°å­—åŒ–çŸ¥è¯†åº“ (Knowledge Hub)
- **ç»“æ„åŒ–å½’æ¡£**: è‡ªåŠ¨å°†å½•å…¥å†…å®¹åˆ†ç±»ä¸º"é”™é¢˜æœ¬"ã€"ç¬”è®°"ã€"æ•™æåº“"
- **Obsidian å…¼å®¹**: ç”Ÿæˆæ ‡å‡† Markdown æ ¼å¼æ•°æ®
- **å…±äº«/ç§æœ‰æœºåˆ¶**: æ”¯æŒå®¶åº­å…¬å…±èµ„æºå…±äº«ï¼Œä¸ªäººæ•°æ®ç§æœ‰åŒ–

### 6. æ™ºèƒ½è€ƒåœº (Smart Exam Center)
- **å¼•æ“**: `gemini-3-pro-preview` (Reasoning with Thinking Budget)
- **RAG æ£€ç´¢å¢å¼º**: åŸºäºå­¦ç”Ÿå†å²é”™é¢˜ä¸Šä¸‹æ–‡è¿›è¡Œæ™ºèƒ½æ£€ç´¢
- **æ¨ç†å‘½é¢˜**: AI æ¨¡ä»¿å‡ºé¢˜äººæ€ç»´ï¼Œé’ˆå¯¹è–„å¼±ç‚¹ç”Ÿæˆå˜å¼é¢˜
- **è¯•å·ç”Ÿæˆ**: è‡ªåŠ¨ç”ŸæˆåŒ…å«åŸºç¡€é¢˜ã€è¿›é˜¶é¢˜ã€å‹è½´é¢˜åŠæ•™å¸ˆç‰ˆè§£æ

### 7. ç§»åŠ¨ç«¯ä¼˜å…ˆä½“éªŒ (Mobile First)
- å®Œç¾é€‚é… iOS/Android æ‰‹æœº
- é’ˆå¯¹åˆ˜æµ·å±ä¼˜åŒ– (`viewport-fit=cover`)
- è§¦æ§å‹å¥½çš„æ“ä½œç•Œé¢ä¸å¡ç‰‡å¼è§†å›¾

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        äº‘æœåŠ¡å™¨ (2æ ¸4G)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   Nginx     â”‚â†’ â”‚   Backend    â”‚â†’ â”‚  AnythingLLM    â”‚    â”‚
â”‚  â”‚  (Port 80)  â”‚  â”‚  (Port 3000) â”‚  â”‚  (Port 3001)    â”‚    â”‚
â”‚  â”‚             â”‚  â”‚              â”‚  â”‚                 â”‚    â”‚
â”‚  â”‚  é™æ€æ–‡ä»¶   â”‚  â”‚  Express.js  â”‚  â”‚  å‘é‡æ•°æ®åº“     â”‚    â”‚
â”‚  â”‚  åå‘ä»£ç†   â”‚  â”‚  API è·¯ç”±    â”‚  â”‚  RAG æ£€ç´¢       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚         â”‚                 â”‚                   â”‚              â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                    Docker Compose                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
                     Google Gemini API
                   (AI æ¨ç† / OCR / è¯¾ä»¶ç”Ÿæˆ)
```

### æŠ€æœ¯æ ˆ

**å‰ç«¯**:
- React 18 + TypeScript
- Tailwind CSS (Utility-first)
- Lucide React (å›¾æ ‡åº“)
- React Markdown (Markdown æ¸²æŸ“)
- IndexedDB (æœ¬åœ°æ•°æ®å­˜å‚¨)
- Vite (æ„å»ºå·¥å…·)

**åç«¯**:
- Node.js 18+ + Express.js
- TypeScript (ç±»å‹å®‰å…¨)
- Multer (æ–‡ä»¶ä¸Šä¼ )
- PDF-Parse (PDF è§£æ)
- EPUB2 (EPUB è§£æ)
- Google GenAI SDK (Gemini 3 é›†æˆ)

**AI å¼•æ“**:
- Google Gemini 3 Flash (OCR / å…ƒæ•°æ®æå–)
- Google Gemini 3 Pro (è¯¾ä»¶ç”Ÿæˆ / æµ‹éªŒç”Ÿæˆ)
- AnythingLLM (å‘é‡åŒ– / RAG æ£€ç´¢)

**åŸºç¡€è®¾æ–½**:
- Docker + Docker Compose
- Nginx (åå‘ä»£ç† + é™æ€æ–‡ä»¶æœåŠ¡)
- LanceDB (å‘é‡æ•°æ®åº“)

---

## ğŸš€ äº‘æœåŠ¡å™¨éƒ¨ç½²æŒ‡å—

### ä¸€ã€æœåŠ¡å™¨è¦æ±‚

**æœ€ä½é…ç½®**:
- CPU: 2æ ¸
- å†…å­˜: 4GB
- ç¡¬ç›˜: 20GB SSD
- æ“ä½œç³»ç»Ÿ: Ubuntu 20.04+ / CentOS 7+

**æ¨èé…ç½®**:
- CPU: 4æ ¸
- å†…å­˜: 8GB
- ç¡¬ç›˜: 40GB SSD

**å¿…é¡»å®‰è£…**:
- Docker
- Docker Compose
- Git

---

### äºŒã€å¿«é€Ÿéƒ¨ç½²ï¼ˆä¸€é”®éƒ¨ç½²ï¼‰

#### æ­¥éª¤ 1: æœåŠ¡å™¨å‡†å¤‡

```bash
# æ›´æ–°ç³»ç»Ÿ
sudo apt update && sudo apt upgrade -y

# å®‰è£… Docker
curl -fsSL https://get.docker.com | bash

# å®‰è£… Docker Compose
sudo apt install docker-compose -y

# å¯åŠ¨ Docker
sudo systemctl start docker
sudo systemctl enable docker

# å°†å½“å‰ç”¨æˆ·åŠ å…¥ docker ç»„ï¼ˆå¯é€‰ï¼Œé¿å…æ¯æ¬¡ä½¿ç”¨ sudoï¼‰
sudo usermod -aG docker $USER
# æ³¨é”€å¹¶é‡æ–°ç™»å½•ç”Ÿæ•ˆ
```

#### æ­¥éª¤ 2: å…‹éš†ä»£ç 

```bash
# SSH å…‹éš†
git clone git@github.com:your-username/home-learning-os.git

# æˆ– HTTPS å…‹éš†
git clone https://github.com/your-username/home-learning-os.git

cd home-learning-os
```

#### æ­¥éª¤ 3: é…ç½®ç¯å¢ƒå˜é‡

```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp .env.example .env

# ç¼–è¾‘é…ç½®æ–‡ä»¶
nano .env

# å¡«å†™ä»¥ä¸‹ä¿¡æ¯ï¼š
# GEMINI_API_KEY=your_actual_gemini_key
# ANYTHINGLLM_API_KEY=$(openssl rand -hex 32)
```

**GEMINI_API_KEY ç”³è¯·**:
1. è®¿é—® [Google AI Studio](https://aistudio.google.com/)
2. ç™»å½• Google è´¦å·
3. ç‚¹å‡»ã€ŒGet API Keyã€
4. åˆ›å»ºæ–°é¡¹ç›®æˆ–é€‰æ‹©ç°æœ‰é¡¹ç›®
5. å¤åˆ¶ç”Ÿæˆçš„ API Key

**ANYTHINGLLM_API_KEY ç”Ÿæˆ**:
```bash
openssl rand -hex 32
```

#### æ­¥éª¤ 4: æ‰§è¡Œéƒ¨ç½²

```bash
# ç»™éƒ¨ç½²è„šæœ¬æ‰§è¡Œæƒé™
chmod +x deploy.sh

# æ‰§è¡Œä¸€é”®éƒ¨ç½²
./deploy.sh
```

éƒ¨ç½²è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
1. æ£€æŸ¥ç¯å¢ƒé…ç½®
2. æ„å»ºå‰ç«¯ä»£ç 
3. å¯åŠ¨ Docker å®¹å™¨ï¼ˆNginx + Backend + AnythingLLMï¼‰
4. æ‰§è¡Œå¥åº·æ£€æŸ¥

**éƒ¨ç½²æ—¶é—´**: çº¦ 5-10 åˆ†é’Ÿï¼ˆå–å†³äºç½‘ç»œé€Ÿåº¦ï¼‰

#### æ­¥éª¤ 5: éªŒè¯éƒ¨ç½²

è®¿é—®ä»¥ä¸‹åœ°å€æ£€æŸ¥æœåŠ¡çŠ¶æ€ï¼š

- **å‰ç«¯**: `http://your-server-ip`
- **åç«¯å¥åº·æ£€æŸ¥**: `http://your-server-ip/api/health`
- **AnythingLLM ç®¡ç†ç•Œé¢**: `http://your-server-ip:3001`

**é¢„æœŸå“åº”**:
```json
// http://your-server-ip/api/health
{
  "status": "ok",
  "timestamp": 1737292800000,
  "version": "1.0.0"
}
```

---

### ä¸‰ã€é˜²ç«å¢™é…ç½®

```bash
# Ubuntu/Debian
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp
sudo ufw enable
sudo ufw status

# CentOS/RHEL
sudo firewall-cmd --permanent --add-service=http
sudo firewall-cmd --permanent --add-service=https
sudo firewall-cmd --reload
```

---

### å››ã€å¸¸ç”¨è¿ç»´å‘½ä»¤

#### æŸ¥çœ‹æœåŠ¡çŠ¶æ€

```bash
# æŸ¥çœ‹æ‰€æœ‰å®¹å™¨çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹èµ„æºä½¿ç”¨æƒ…å†µ
docker stats
```

#### æŸ¥çœ‹æ—¥å¿—

```bash
# æŸ¥çœ‹æ‰€æœ‰æœåŠ¡æ—¥å¿—
docker-compose logs -f

# æŸ¥çœ‹ç‰¹å®šæœåŠ¡æ—¥å¿—
docker-compose logs -f backend
docker-compose logs -f anythingllm
docker-compose logs -f nginx

# æŸ¥çœ‹æœ€è¿‘ 100 è¡Œæ—¥å¿—
docker-compose logs --tail=100 backend
```

#### é‡å¯æœåŠ¡

```bash
# é‡å¯æ‰€æœ‰æœåŠ¡
docker-compose restart

# é‡å¯ç‰¹å®šæœåŠ¡
docker-compose restart backend
docker-compose restart anythingllm
```

#### åœæ­¢æœåŠ¡

```bash
# åœæ­¢æ‰€æœ‰æœåŠ¡
docker-compose down

# åœæ­¢å¹¶åˆ é™¤å·ï¼ˆæ¸…ç©ºæ•°æ®ï¼‰
docker-compose down -v
```

#### æ›´æ–°ä»£ç å¹¶é‡æ–°éƒ¨ç½²

```bash
# æ‹‰å–æœ€æ–°ä»£ç 
git pull

# é‡æ–°éƒ¨ç½²
./deploy.sh
```

---

### äº”ã€æ€§èƒ½ä¼˜åŒ–ï¼ˆ2æ ¸4G æœåŠ¡å™¨ï¼‰

#### 1. å¯ç”¨ Swap å†…å­˜

```bash
# åˆ›å»º 2G swap æ–‡ä»¶
sudo fallocate -l 2G /swapfile
sudo chmod 600 /swapfile
sudo mkswap /swapfile
sudo swapon /swapfile

# æ°¸ä¹…ç”Ÿæ•ˆ
echo '/swapfile none swap sw 0 0' | sudo tee -a /etc/fstab

# éªŒè¯
free -h
```

#### 2. å®šæœŸæ¸…ç† Docker

```bash
# æ‰‹åŠ¨æ¸…ç†æœªä½¿ç”¨çš„é•œåƒã€å®¹å™¨ã€ç½‘ç»œ
docker system prune -af

# æ·»åŠ åˆ° crontabï¼ˆæ¯å‘¨æ—¥å‡Œæ™¨2ç‚¹æ‰§è¡Œï¼‰
(crontab -l 2>/dev/null; echo "0 2 * * 0 docker system prune -af") | crontab -
```

#### 3. ç›‘æ§å†…å­˜ä½¿ç”¨

```bash
# æŸ¥çœ‹å†…å­˜ä½¿ç”¨
free -h

# æŸ¥çœ‹ Docker å®¹å™¨èµ„æºä½¿ç”¨
docker stats --no-stream

# æŒç»­ç›‘æ§
watch -n 5 docker stats --no-stream
```

---

### å…­ã€é…ç½® HTTPSï¼ˆå¯é€‰ä½†æ¨èï¼‰

ä½¿ç”¨ Let's Encrypt å…è´¹ SSL è¯ä¹¦ï¼š

```bash
# 1. å®‰è£… certbot
sudo apt install certbot

# 2. åœæ­¢ Nginx å®¹å™¨
docker-compose stop nginx

# 3. ç”Ÿæˆè¯ä¹¦ï¼ˆæ›¿æ¢ your-domain.com ä¸ºä½ çš„åŸŸåï¼‰
sudo certbot certonly --standalone -d your-domain.com

# 4. è¯ä¹¦ä½ç½®
# /etc/letsencrypt/live/your-domain.com/fullchain.pem
# /etc/letsencrypt/live/your-domain.com/privkey.pem

# 5. å¤åˆ¶è¯ä¹¦åˆ°é¡¹ç›®ç›®å½•
mkdir -p ssl
sudo cp /etc/letsencrypt/live/your-domain.com/fullchain.pem ssl/cert.pem
sudo cp /etc/letsencrypt/live/your-domain.com/privkey.pem ssl/key.pem
sudo chown $USER:$USER ssl/*

# 6. ä¿®æ”¹ nginx.conf å¯ç”¨ HTTPS é…ç½®ï¼ˆå–æ¶ˆ 443 ç«¯å£é…ç½®çš„æ³¨é‡Šï¼‰

# 7. é‡å¯æœåŠ¡
docker-compose up -d

# 8. é…ç½®è‡ªåŠ¨ç»­æœŸ
sudo certbot renew --dry-run
(crontab -l 2>/dev/null; echo "0 3 * * * certbot renew --quiet && docker-compose restart nginx") | crontab -
```

---

### ä¸ƒã€æ•°æ®å¤‡ä»½ä¸æ¢å¤

#### å¤‡ä»½ AnythingLLM æ•°æ®

```bash
# 1. åœæ­¢æœåŠ¡
docker-compose stop anythingllm

# 2. å¤‡ä»½å­˜å‚¨ç›®å½•
tar -czf anythingllm-backup-$(date +%Y%m%d-%H%M%S).tar.gz anythingllm-storage/

# 3. é‡å¯æœåŠ¡
docker-compose start anythingllm

# 4. å°†å¤‡ä»½æ–‡ä»¶ä¼ è¾“åˆ°å®‰å…¨ä½ç½®
scp anythingllm-backup-*.tar.gz user@backup-server:/backups/
```

#### æ¢å¤å¤‡ä»½

```bash
# 1. åœæ­¢æœåŠ¡
docker-compose stop anythingllm

# 2. åˆ é™¤æ—§æ•°æ®ï¼ˆè°¨æ…æ“ä½œï¼‰
rm -rf anythingllm-storage/*

# 3. è§£å‹å¤‡ä»½
tar -xzf anythingllm-backup-YYYYMMDD-HHMMSS.tar.gz

# 4. é‡å¯æœåŠ¡
docker-compose start anythingllm
```

#### å®šæœŸå¤‡ä»½è„šæœ¬

```bash
# åˆ›å»ºå¤‡ä»½è„šæœ¬
cat > backup.sh << 'EOF'
#!/bin/bash
BACKUP_DIR="/backups/home-learning-os"
DATE=$(date +%Y%m%d-%H%M%S)

mkdir -p $BACKUP_DIR
docker-compose stop anythingllm
tar -czf $BACKUP_DIR/anythingllm-$DATE.tar.gz anythingllm-storage/
docker-compose start anythingllm

# åˆ é™¤ 30 å¤©å‰çš„å¤‡ä»½
find $BACKUP_DIR -name "anythingllm-*.tar.gz" -mtime +30 -delete
EOF

chmod +x backup.sh

# æ·»åŠ åˆ° crontabï¼ˆæ¯å¤©å‡Œæ™¨ 2 ç‚¹æ‰§è¡Œï¼‰
(crontab -l 2>/dev/null; echo "0 2 * * * /path/to/backup.sh") | crontab -
```

---

### å…«ã€æ•…éšœæ’æŸ¥

#### é—®é¢˜ 1: ç«¯å£å ç”¨

**ç—‡çŠ¶**: å®¹å™¨å¯åŠ¨å¤±è´¥ï¼Œæç¤ºç«¯å£å·²è¢«å ç”¨

```bash
# æ£€æŸ¥ç«¯å£å ç”¨
sudo lsof -i :80
sudo lsof -i :3000
sudo lsof -i :3001

# åœæ­¢å ç”¨ç«¯å£çš„è¿›ç¨‹
sudo kill -9 <PID>

# æˆ–ä¿®æ”¹ docker-compose.yml ä¸­çš„ç«¯å£æ˜ å°„
```

#### é—®é¢˜ 2: å®¹å™¨æ— æ³•å¯åŠ¨

**ç—‡çŠ¶**: `docker-compose up -d` å¤±è´¥

```bash
# æŸ¥çœ‹è¯¦ç»†é”™è¯¯æ—¥å¿—
docker-compose logs <service-name>

# æ£€æŸ¥é…ç½®æ–‡ä»¶è¯­æ³•
docker-compose config

# æ£€æŸ¥ Docker æœåŠ¡çŠ¶æ€
sudo systemctl status docker

# é‡å¯ Docker æœåŠ¡
sudo systemctl restart docker
```

#### é—®é¢˜ 3: å†…å­˜ä¸è¶³

**ç—‡çŠ¶**: å®¹å™¨é¢‘ç¹é‡å¯ï¼Œç³»ç»Ÿå¡é¡¿

```bash
# æŸ¥çœ‹å†…å­˜ä½¿ç”¨
free -h

# æŸ¥çœ‹ Docker å®¹å™¨å†…å­˜é™åˆ¶
docker inspect hl-anythingllm | grep -i memory

# ä¸´æ—¶æ¸…ç†ç¼“å­˜
sudo sync && sudo sysctl -w vm.drop_caches=3

# è°ƒæ•´ docker-compose.yml ä¸­çš„å†…å­˜é™åˆ¶
# deploy:
#   resources:
#     limits:
#       memory: 1.5G  # é™ä½å†…å­˜é™åˆ¶
```

#### é—®é¢˜ 4: API Key é…ç½®é”™è¯¯

**ç—‡çŠ¶**: å‰ç«¯æç¤º API é”™è¯¯ï¼Œåç«¯æ—¥å¿—æ˜¾ç¤ºè®¤è¯å¤±è´¥

```bash
# æ£€æŸ¥ç¯å¢ƒå˜é‡
docker-compose exec backend env | grep GEMINI
docker-compose exec anythingllm env | grep GEMINI

# é‡æ–°è®¾ç½®ç¯å¢ƒå˜é‡åéœ€è¦é‡å¯
docker-compose down
docker-compose up -d

# æ£€æŸ¥ .env æ–‡ä»¶æ ¼å¼ï¼ˆä¸è¦æœ‰å¤šä½™ç©ºæ ¼ï¼‰
cat .env
```

#### é—®é¢˜ 5: Nginx æ— æ³•è®¿é—®

**ç—‡çŠ¶**: æµè§ˆå™¨æ˜¾ç¤º 502 Bad Gateway

```bash
# æ£€æŸ¥ Nginx æ—¥å¿—
docker-compose logs nginx

# æ£€æŸ¥åç«¯æ˜¯å¦æ­£å¸¸è¿è¡Œ
docker-compose ps backend
curl http://localhost:3000/api/health

# æ£€æŸ¥ Nginx é…ç½®
docker-compose exec nginx nginx -t

# é‡å¯ Nginx
docker-compose restart nginx
```

#### é—®é¢˜ 6: å›¾ä¹¦ä¸Šä¼ å¤±è´¥

**ç—‡çŠ¶**: ä¸Šä¼  PDF/EPUB æ–‡ä»¶æ—¶æŠ¥é”™

```bash
# æ£€æŸ¥æ–‡ä»¶å¤§å°é™åˆ¶ï¼ˆé»˜è®¤ 100MBï¼‰
# ç¼–è¾‘ backend/src/routes/upload-book.ts ä¸­çš„ fileSize é…ç½®

# æ£€æŸ¥ Nginx é…ç½®ä¸­çš„ client_max_body_size
# ç¼–è¾‘ nginx.confï¼Œç¡®ä¿ï¼š
# client_max_body_size 100M;

# é‡å¯æœåŠ¡
docker-compose restart nginx backend
```

---

### ä¹ã€å®‰å…¨å»ºè®®

#### 1. å®šæœŸæ›´æ–°ç³»ç»Ÿ

```bash
sudo apt update && sudo apt upgrade -y
```

#### 2. é…ç½®é˜²ç«å¢™

ä»…å¼€æ”¾å¿…è¦ç«¯å£ï¼ˆ80, 443ï¼‰ï¼Œå…³é—­ 3000, 3001 ç­‰å†…éƒ¨ç«¯å£çš„å¤–éƒ¨è®¿é—®

#### 3. ä½¿ç”¨ HTTPS

ç”Ÿäº§ç¯å¢ƒå¿…é¡»é…ç½® SSL è¯ä¹¦ï¼Œä¿æŠ¤æ•°æ®ä¼ è¾“å®‰å…¨

#### 4. å®šæœŸå¤‡ä»½æ•°æ®

è‡³å°‘æ¯å‘¨å¤‡ä»½ä¸€æ¬¡ AnythingLLM æ•°æ®

#### 5. ç›‘æ§æ—¥å¿—å¼‚å¸¸

```bash
# å®æ—¶ç›‘æ§é”™è¯¯æ—¥å¿—
docker-compose logs --tail=100 -f | grep -i error

# å®šæœŸæ£€æŸ¥ç£ç›˜ç©ºé—´
df -h
```

#### 6. é™åˆ¶ SSH è®¿é—®

```bash
# ä½¿ç”¨å¯†é’¥è®¤è¯
ssh-keygen -t ed25519
ssh-copy-id user@server

# ç¦ç”¨å¯†ç ç™»å½•
sudo nano /etc/ssh/sshd_config
# PasswordAuthentication no
sudo systemctl restart sshd
```

#### 7. API Key å®‰å…¨

- **åˆ‡å‹¿**å°† `.env` æ–‡ä»¶æäº¤åˆ° Git ä»“åº“
- **åˆ‡å‹¿**åœ¨æ—¥å¿—ä¸­æ‰“å° API Key
- å®šæœŸè½®æ¢ API Key

---

## ğŸ“± ä½¿ç”¨æŒ‡å—

### é¦–æ¬¡ä½¿ç”¨

1. **è®¿é—®åº”ç”¨**: æµè§ˆå™¨è¾“å…¥ `http://your-server-ip`
2. **é€‰æ‹©ç”¨æˆ·**: ç‚¹å‡»å¤´åƒåˆ‡æ¢å­¦ç”Ÿï¼ˆå¤§å®/äºŒå®ï¼‰
3. **ä¸Šä¼ å›¾ä¹¦**:
   - è¿›å…¥ã€Œå›¾ä¹¦é¦†ã€æ¨¡å—
   - ç‚¹å‡»ã€Œä¸Šä¼ å›¾ä¹¦ã€
   - é€‰æ‹© PDF/EPUB/TXT æ–‡ä»¶
   - ç­‰å¾… AI è‡ªåŠ¨åˆ†æå…ƒæ•°æ®
   - ç¼–è¾‘ç¡®è®¤åä¿å­˜
4. **æ‹é¢˜å½•å…¥**:
   - è¿›å…¥ã€Œæ‹é¢˜ã€æ¨¡å—
   - æ‹ç…§æˆ–ä¸Šä¼ å›¾ç‰‡
   - AI è‡ªåŠ¨è¯†åˆ«å¹¶å½’æ¡£
5. **ç”Ÿæˆè¯¾ä»¶**:
   - è¿›å…¥ã€Œå­¦ä¹ å›­åœ°ã€
   - é€‰æ‹©æ•™æå’Œç« èŠ‚
   - é€‰æ‹©æ•™å­¦é£æ ¼
   - ç”Ÿæˆä¸ªæ€§åŒ–è¯¾ä»¶
6. **ç”Ÿæˆæµ‹éªŒ**:
   - åœ¨è¯¾ä»¶é¡µé¢ç»§ç»­
   - è‡ªåŠ¨ç”Ÿæˆé…å¥—æµ‹éªŒ
   - ä¸‹è½½ Markdown æ–‡ä»¶

### æ•°æ®ç®¡ç†

- **æœ¬åœ°å­˜å‚¨**: å›¾ä¹¦æ•°æ®å­˜å‚¨åœ¨æµè§ˆå™¨ IndexedDB ä¸­
- **äº‘ç«¯å­˜å‚¨**: é”™é¢˜ã€ç¬”è®°ç­‰æ•°æ®å¯é€‰æ‹©åŒæ­¥åˆ°äº‘ç«¯
- **æ•°æ®å¯¼å‡º**: æ”¯æŒå¯¼å‡ºä¸º Markdown æ ¼å¼

---

## ğŸ”§ æœ¬åœ°å¼€å‘

### å‰ç½®è¦æ±‚

- Node.js >= 18.0
- npm >= 9.0
- Google Gemini API Key

### å¼€å‘æ­¥éª¤

```bash
# 1. å…‹éš†ä»£ç 
git clone <repository-url>
cd home-learning-os

# 2. å®‰è£…å‰ç«¯ä¾èµ–
npm install

# 3. å®‰è£…åç«¯ä¾èµ–
cd backend
npm install
cd ..

# 4. é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘ .env å¡«å†™ GEMINI_API_KEY

# 5. å¯åŠ¨åç«¯
cd backend
npm run dev
# åç«¯è¿è¡Œåœ¨ http://localhost:3000

# 6. å¯åŠ¨å‰ç«¯ï¼ˆæ–°ç»ˆç«¯ï¼‰
npm run dev
# å‰ç«¯è¿è¡Œåœ¨ http://localhost:5173
```

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
# æ„å»ºå‰ç«¯
npm run build

# æ„å»ºåç«¯
cd backend
npm run build
```

---

## ğŸ“Š ç³»ç»Ÿç›‘æ§

### Prometheus + Grafanaï¼ˆå¯é€‰ï¼‰

```bash
# docker-compose.monitoring.yml
version: '3.8'
services:
  prometheus:
    image: prom/prometheus
    volumes:
      - ./prometheus.yml:/etc/prometheus/prometheus.yml
    ports:
      - "9090:9090"

  grafana:
    image: grafana/grafana
    ports:
      - "3000:3000"
    environment:
      - GF_SECURITY_ADMIN_PASSWORD=admin
```

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

---

## ğŸ™ è‡´è°¢

- [Google Gemini](https://ai.google.dev/) - å¼ºå¤§çš„å¤šæ¨¡æ€ AI å¼•æ“
- [AnythingLLM](https://github.com/Mintplex-Labs/anything-llm) - ä¼˜ç§€çš„ç§æœ‰åŒ– RAG è§£å†³æ–¹æ¡ˆ
- [React](https://react.dev/) - ç°ä»£åŒ–çš„å‰ç«¯æ¡†æ¶
- [Tailwind CSS](https://tailwindcss.com/) - é«˜æ•ˆçš„ CSS æ¡†æ¶

---

## ğŸ“ è”ç³»æ–¹å¼

- é¡¹ç›®åœ°å€: [GitHub Repository]
- é—®é¢˜åé¦ˆ: [Issues]
- è®¾è®¡æ–‡æ¡£: [docs/plans/2026-01-19-å›¾ä¹¦é¦†ä¸AIå­¦ä¹ å›­åœ°-design.md]

---

**Made with â¤ï¸ for family education**
