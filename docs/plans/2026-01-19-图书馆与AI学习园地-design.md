# å›¾ä¹¦é¦†ä¸AIå­¦ä¹ å›­åœ°åŠŸèƒ½è®¾è®¡æ–‡æ¡£

**æ—¥æœŸ**: 2026-01-19
**ç‰ˆæœ¬**: 1.0
**è®¾è®¡è€…**: Claude 4.5 + ç”¨æˆ·åä½œ

---

## ç›®å½•

1. [é¡¹ç›®èƒŒæ™¯](#1-é¡¹ç›®èƒŒæ™¯)
2. [æ ¸å¿ƒéœ€æ±‚](#2-æ ¸å¿ƒéœ€æ±‚)
3. [æ•´ä½“æ¶æ„](#3-æ•´ä½“æ¶æ„)
4. [æ•°æ®æ¨¡å‹è®¾è®¡](#4-æ•°æ®æ¨¡å‹è®¾è®¡)
5. [ç”¨æˆ·äº¤äº’æµç¨‹](#5-ç”¨æˆ·äº¤äº’æµç¨‹)
6. [æŠ€æœ¯å®ç°ç»†èŠ‚](#6-æŠ€æœ¯å®ç°ç»†èŠ‚)
7. [éƒ¨ç½²æ¶æ„](#7-éƒ¨ç½²æ¶æ„)
8. [æ•°æ®æŒä¹…åŒ–ä¸åŒæ­¥](#8-æ•°æ®æŒä¹…åŒ–ä¸åŒæ­¥)
9. [å®ç°è·¯çº¿å›¾](#9-å®ç°è·¯çº¿å›¾)
10. [é£é™©ä¸åº”å¯¹](#10-é£é™©ä¸åº”å¯¹)

---

## 1. é¡¹ç›®èƒŒæ™¯

æ™ºå­¦ OS å½“å‰å·²å®ç°ï¼š
- OCR æ‹é¢˜è¯†åˆ«ï¼ˆGemini Visionï¼‰
- é”™é¢˜å½’æ¡£åˆ°çŸ¥è¯†åº“
- åŸºäºé”™é¢˜ç”Ÿæˆè¯•å·ï¼ˆæ™ºèƒ½è€ƒåœºï¼‰

æœ¬æ¬¡è®¾è®¡æ–°å¢ä¸¤ä¸ªæ ¸å¿ƒæ¨¡å—ï¼š
1. **å›¾ä¹¦é¦†æ¨¡å—**: ä¸Šä¼ ç”µå­ä¹¦ç±ï¼ˆPDF/EPUB/TXTï¼‰ï¼ŒAI è‡ªåŠ¨åˆ†ç±»å’Œç›®å½•æå–
2. **AIå­¦ä¹ å›­åœ°**: åŸºäºå›¾ä¹¦ç« èŠ‚ + å†å²é”™é¢˜ç”Ÿæˆä¸ªæ€§åŒ–è¯¾ä»¶ï¼Œå¹¶æä¾›é…å¥—æµ‹éªŒ

---

## 2. æ ¸å¿ƒéœ€æ±‚

### 2.1 å›¾ä¹¦é¦†åŠŸèƒ½

**ç”¨æˆ·æ•…äº‹**:
- ç”¨æˆ·å¯ä¸Šä¼ å­¦ç§‘æ•™æã€æ•™è¾…ã€ç«èµ›èµ„æ–™ç­‰ç”µå­ä¹¦ç±
- ç³»ç»Ÿè‡ªåŠ¨è¯†åˆ«å­¦ç§‘ã€ç±»å‹ã€å¹´çº§ã€æ ‡ç­¾
- ç”¨æˆ·å¯æ ¡éªŒå’Œä¿®æ”¹ AI è¯†åˆ«ç»“æœ
- ç³»ç»Ÿè‡ªåŠ¨æå–ä¹¦ç±ç›®å½•ç»“æ„ï¼ˆç« èŠ‚æ ‘ï¼‰
- ä¹¦ç±å…¨æ–‡å‘é‡åŒ–ç´¢å¼•åˆ° AnythingLLMï¼Œæ”¯æŒè¯­ä¹‰æ£€ç´¢
- åŒä¸€å®¶åº­çš„ç”¨æˆ·å¯å…±äº«å›¾ä¹¦é¦†

**æ”¯æŒæ ¼å¼**: PDFã€EPUBã€TXT

**AI åˆ†ç±»ç»´åº¦**:
- å­¦ç§‘ï¼šæ•°å­¦/ç‰©ç†/åŒ–å­¦/è‹±è¯­/è¯­æ–‡ç­‰
- ç±»å‹ï¼šæ•™æ/æ•™è¾…/ç«èµ›èµ„æ–™/è€ƒè¯•çœŸé¢˜
- å¹´çº§ï¼šå°å­¦/åˆä¸­/é«˜ä¸­/å¤§å­¦
- æ ‡ç­¾ï¼šè‡ªåŠ¨æå–å…³é”®è¯ï¼ˆå¦‚"å¥¥æ•°"ã€"KET"ã€"äºŒæ¬¡å‡½æ•°"ï¼‰

### 2.2 AIå­¦ä¹ å›­åœ°åŠŸèƒ½

**ç”¨æˆ·æ•…äº‹**:
- ç”¨æˆ·åœ¨"è¯¾ä»¶å­¦ä¹ " Tab é€‰æ‹©ï¼š
  1. å›¾ä¹¦ç« èŠ‚ï¼ˆä»å›¾ä¹¦é¦†é€‰æ‹©ï¼Œæ”¯æŒå¤šé€‰ï¼‰
  2. å†å²é”™é¢˜ï¼ˆæ™ºèƒ½åŒ¹é… + æ‰‹åŠ¨é€‰æ‹©ï¼‰
  3. æœ¬åœ°ç¬”è®°ï¼ˆå¯é€‰ä¸Šä¼  .md æ–‡ä»¶ï¼‰
  4. è®²è§£é£æ ¼ï¼ˆ4ç§é¢„è®¾é£æ ¼ï¼‰
- ç³»ç»Ÿç”Ÿæˆä¸ªæ€§åŒ–å­¦ä¹ è¯¾ä»¶ï¼ˆMarkdown æ ¼å¼ï¼‰
- ç”¨æˆ·å­¦ä¹ åå¯ç”Ÿæˆé…å¥—æµ‹éªŒï¼ˆæ¯ä¸ªçŸ¥è¯†ç‚¹ 2åŸºç¡€é¢˜ + 1è¿›é˜¶é¢˜ï¼‰
- è¯¾ä»¶å’Œæµ‹éªŒå¯ä¸‹è½½ä¸ºæ ‡å‡† Markdown æ–‡ä»¶ï¼ˆå« Frontmatterï¼‰

**è®²è§£é£æ ¼**:
1. ğŸ“š **ä¸¥è°¨å­¦æœ¯**: å®šä¹‰â†’å®šç†â†’è¯æ˜â†’ä¾‹é¢˜ï¼Œé€‚åˆç«èµ›å’Œé«˜å¹´çº§
2. ğŸ¨ **è¶£å‘³æ•…äº‹**: ç”Ÿæ´»åœºæ™¯å¼•å…¥ï¼Œå¯“æ•™äºä¹ï¼Œé€‚åˆå°å­¦å’Œåˆä¸­ä½å¹´çº§
3. ğŸ’¡ **ä¹ é¢˜å¯¼å‘**: ä¾‹é¢˜ä¸ºä¸­å¿ƒï¼Œå½’çº³æ–¹æ³•ï¼Œé€‚åˆåº”è¯•å¤‡è€ƒ
4. ğŸ”¬ **æ¢ç´¢å‘ç°**: è‹æ ¼æ‹‰åº•å¼æé—®ï¼Œå¼•å¯¼æ€è€ƒï¼Œé€‚åˆæ€ç»´è®­ç»ƒ

**æµ‹éªŒç”Ÿæˆè§„åˆ™**:
- æ¯ä¸ªçŸ¥è¯†ç‚¹ç”Ÿæˆ 3 é“é¢˜ï¼š2 åŸºç¡€é¢˜ + 1 è¿›é˜¶é¢˜
- åŸºç¡€é¢˜ï¼šç›´æ¥åº”ç”¨æ¦‚å¿µï¼Œéš¾åº¦é€‚ä¸­
- è¿›é˜¶é¢˜ï¼šç»¼åˆåº”ç”¨æˆ–å˜å¼ï¼Œæœ‰ä¸€å®šæ€ç»´å«é‡

### 2.3 æ•°æ®æ²‰æ·€ç­–ç•¥

**æ ¸å¿ƒç†å¿µ**: ç”¨æˆ·å­¦ä¹ æ•°æ®ä»¥æ ‡å‡† Markdown æ ¼å¼ä¿å­˜åœ¨æœ¬åœ°ï¼Œå½¢æˆä¸ªäººçŸ¥è¯†åº“ï¼ˆå…¼å®¹ Obsidian æ ¼å¼ï¼Œä½†ä¸ä¾èµ– Obsidian è½¯ä»¶ï¼‰

**å­˜å‚¨åˆ†å±‚**:

| æ•°æ®ç±»å‹ | çƒ­æ•°æ®ï¼ˆå‰ç«¯Stateï¼‰ | æ¸©æ•°æ®ï¼ˆAnythingLLMï¼‰ | å†·æ•°æ®ï¼ˆæœ¬åœ°æ–‡ä»¶ï¼‰ |
|---------|-------------------|---------------------|------------------|
| ç”µå­ä¹¦ç± | å…ƒæ•°æ®åˆ—è¡¨ | âœ… å…¨æ–‡+å‘é‡åŒ– | âŒ |
| OCRé”™é¢˜ | scannedItems[] | âœ… æ¨é€åå‘é‡åŒ– | âœ… ç”¨æˆ·ä¸‹è½½.md |
| ç”Ÿæˆè¯¾ä»¶ | coursewareList[] | ğŸ“Œ ç´¢å¼•+æ‘˜è¦ | âœ… ç”¨æˆ·ä¸‹è½½.md |
| ç”Ÿæˆè¯•å· | examList[] | ğŸ“Œ ç´¢å¼•+æ‘˜è¦ | âœ… ç”¨æˆ·ä¸‹è½½.md |

**æœ¬åœ°æ–‡ä»¶å¤¹å»ºè®®ç»“æ„**:
```
æˆ‘çš„å­¦ä¹ çŸ¥è¯†åº“/
â”œâ”€ Students/
â”‚   â”œâ”€ DaBao/
â”‚   â”‚   â”œâ”€ Wrong_Problems/  # é”™é¢˜æœ¬
â”‚   â”‚   â”œâ”€ Courses/          # å­¦ä¹ è¯¾ä»¶
â”‚   â”‚   â”œâ”€ Exams/            # ç”Ÿæˆè¯•å·
â”‚   â”‚   â””â”€ Notes/            # æ‰‹å†™ç¬”è®°
â”‚   â””â”€ ErBao/
â””â”€ Library_Index/            # å›¾ä¹¦é¦†ä¹¦ç±ç´¢å¼•ï¼ˆMOCï¼‰
```

---

## 3. æ•´ä½“æ¶æ„

### 3.1 ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  äº‘æœåŠ¡å™¨ (2æ ¸4G)                                 â”‚
â”‚  â”œâ”€ Nginx (ç«¯å£ 80/443)                          â”‚
â”‚  â”‚   â”œâ”€ é™æ€æ–‡ä»¶æœåŠ¡ (React Build)               â”‚
â”‚  â”‚   â””â”€ åå‘ä»£ç† /api â†’ Node.js Backend         â”‚
â”‚  â”‚                                               â”‚
â”‚  â”œâ”€ Node.js Backend (ç«¯å£ 3000)                  â”‚
â”‚  â”‚   â”œâ”€ /api/analyze-image                      â”‚
â”‚  â”‚   â”œâ”€ /api/generate-courseware-v2             â”‚
â”‚  â”‚   â”œâ”€ /api/generate-assessment                â”‚
â”‚  â”‚   â”œâ”€ /api/generate-quiz                      â”‚
â”‚  â”‚   â”œâ”€ /api/library/upload-book                â”‚
â”‚  â”‚   â””â”€ /api/anythingllm/* (ä»£ç†åˆ°æœ¬åœ°)          â”‚
â”‚  â”‚                                               â”‚
â”‚  â””â”€ AnythingLLM (ç«¯å£ 3001)                      â”‚
â”‚      â”œâ”€ æ–‡æ¡£è§£æå¼•æ“                              â”‚
â”‚      â”œâ”€ LanceDB å‘é‡æ•°æ®åº“                        â”‚
â”‚      â””â”€ LLM è°ƒç”¨: Gemini API                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“ HTTPS
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Google Gemini API   â”‚
â”‚  - gemini-3-flash    â”‚
â”‚  - gemini-3-pro      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 æŠ€æœ¯æ ˆ

**å‰ç«¯**:
- React 18 + TypeScript
- Vite æ„å»ºå·¥å…·
- IndexedDB (æ•°æ®æŒä¹…åŒ–)

**åç«¯**:
- Node.js + Express
- TypeScript
- Docker å®¹å™¨åŒ–

**AI å¼•æ“**:
- Google Gemini 3 Flash (OCR è¯†åˆ«)
- Google Gemini 3 Pro (è¯¾ä»¶/è¯•å·ç”Ÿæˆ)
- AnythingLLM (æ–‡æ¡£è§£æ + å‘é‡æ£€ç´¢)

**åŸºç¡€è®¾æ–½**:
- Nginx (åå‘ä»£ç†)
- Docker Compose (å®¹å™¨ç¼–æ’)
- LanceDB (å‘é‡æ•°æ®åº“)

### 3.3 é¡¹ç›®ç»“æ„è°ƒæ•´

```
home-learning-os/
â”œâ”€ frontend/              # å‰ç«¯ä»£ç ï¼ˆåŸæœ‰ä»£ç ç§»åˆ°è¿™é‡Œï¼‰
â”‚   â”œâ”€ src/
â”‚   â”‚   â”œâ”€ components/
â”‚   â”‚   â”‚   â”œâ”€ LibraryHub.tsx (æ”¹é€ )
â”‚   â”‚   â”‚   â”œâ”€ StudyGarden.tsx (é‡æ„ ExamCenter)
â”‚   â”‚   â”‚   â”œâ”€ library/
â”‚   â”‚   â”‚   â”‚   â”œâ”€ BookUploader.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€ BookCard.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€ BookMetadataEditor.tsx
â”‚   â”‚   â”‚   â”œâ”€ study-garden/
â”‚   â”‚   â”‚   â”‚   â”œâ”€ CoursewareGenerator.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€ CoursewareViewer.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€ QuizGenerator.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€ ExamGenerator.tsx (åŸæœ‰åŠŸèƒ½)
â”‚   â”‚   â”‚   â””â”€ shared/
â”‚   â”‚   â”‚       â”œâ”€ MarkdownDownloader.tsx
â”‚   â”‚   â”‚       â””â”€ AnythingLlmStatus.tsx
â”‚   â”‚   â”œâ”€ services/
â”‚   â”‚   â”‚   â”œâ”€ geminiService.ts (å‰ç«¯è°ƒç”¨å±‚)
â”‚   â”‚   â”‚   â””â”€ storageService.ts (IndexedDB)
â”‚   â”‚   â”œâ”€ types.ts (æ–°å¢ EBook, Courseware, Quiz)
â”‚   â”‚   â””â”€ App.tsx
â”‚   â”œâ”€ public/
â”‚   â”œâ”€ package.json
â”‚   â””â”€ vite.config.ts
â”‚
â”œâ”€ backend/               # æ–°å¢ï¼šNode.js åç«¯
â”‚   â”œâ”€ src/
â”‚   â”‚   â”œâ”€ index.ts       # Express æœåŠ¡å™¨å…¥å£
â”‚   â”‚   â”œâ”€ routes/
â”‚   â”‚   â”‚   â”œâ”€ analyze.ts
â”‚   â”‚   â”‚   â”œâ”€ courseware.ts
â”‚   â”‚   â”‚   â”œâ”€ assessment.ts
â”‚   â”‚   â”‚   â”œâ”€ quiz.ts
â”‚   â”‚   â”‚   â”œâ”€ library.ts
â”‚   â”‚   â”‚   â””â”€ anythingllm.ts
â”‚   â”‚   â”œâ”€ services/
â”‚   â”‚   â”‚   â”œâ”€ gemini.service.ts
â”‚   â”‚   â”‚   â”œâ”€ anythingllm.service.ts
â”‚   â”‚   â”‚   â”œâ”€ pdf.service.ts
â”‚   â”‚   â”‚   â””â”€ epub.service.ts
â”‚   â”‚   â””â”€ utils/
â”‚   â”œâ”€ Dockerfile
â”‚   â”œâ”€ package.json
â”‚   â””â”€ tsconfig.json
â”‚
â”œâ”€ docs/
â”‚   â””â”€ plans/
â”‚       â””â”€ 2026-01-19-å›¾ä¹¦é¦†ä¸AIå­¦ä¹ å›­åœ°-design.md
â”‚
â”œâ”€ docker-compose.yml     # å®Œæ•´å®¹å™¨ç¼–æ’
â”œâ”€ nginx.conf             # Nginx é…ç½®
â”œâ”€ .env.example
â”œâ”€ .gitignore
â””â”€ deploy.sh              # ä¸€é”®éƒ¨ç½²è„šæœ¬
```

---

## 4. æ•°æ®æ¨¡å‹è®¾è®¡

### 4.1 æ–°å¢ç±»å‹å®šä¹‰

```typescript
// frontend/src/types.ts

// å›¾ä¹¦é¦†ç›¸å…³
export interface EBook {
  id: string;
  title: string;
  author?: string;
  coverUrl?: string;  // å°é¢å›¾ï¼ˆPDFç¬¬ä¸€é¡µæˆªå›¾ï¼‰
  fileFormat: 'pdf' | 'epub' | 'txt';
  fileSize: number;  // å­—èŠ‚
  uploadedAt: number;
  ownerId: string;  // å¯ä»¥æ˜¯ 'shared' è¡¨ç¤ºå®¶åº­å…±äº«

  // AI è‡ªåŠ¨æå–çš„å…ƒæ•°æ®ï¼ˆç”¨æˆ·å¯ç¼–è¾‘ï¼‰
  subject: string;  // æ•°å­¦/ç‰©ç†/è‹±è¯­
  category: string;  // æ•™æ/æ•™è¾…/ç«èµ›èµ„æ–™/è€ƒè¯•çœŸé¢˜
  grade: string;  // å°å­¦/åˆä¸­/é«˜ä¸­
  tags: string[];  // ['å¥¥æ•°', 'å‡ ä½•', 'ä»£æ•°']

  // ç« èŠ‚ç›®å½•ï¼ˆAIæå–ï¼‰
  tableOfContents: ChapterNode[];

  // AnythingLLM çŠ¶æ€
  indexStatus: 'pending' | 'indexing' | 'indexed' | 'failed';
  anythingLlmDocId?: string;
}

export interface ChapterNode {
  id: string;
  title: string;
  level: number;  // 1=ç« , 2=èŠ‚, 3=å°èŠ‚
  pageRange?: { start: number; end: number };
  children: ChapterNode[];
}

// è¯¾ä»¶ç›¸å…³
export interface Courseware {
  id: string;
  ownerId: string;
  title: string;
  subject: string;
  createdAt: number;

  // ç”Ÿæˆæ¥æº
  sourceBooks: {
    bookId: string;
    bookTitle: string;
    selectedChapters: string[];  // ChapterNode.id[]
  }[];
  sourceWrongProblems: string[];  // ScannedItem.id[]
  sourceNotes: string[];  // ä¸Šä¼ çš„.mdæ–‡ä»¶å

  // ç”Ÿæˆé…ç½®
  style: CoursewareStyle;

  // å†…å®¹
  content: string;  // Markdownæ ¼å¼
  knowledgePoints: string[];  // æå–çš„çŸ¥è¯†ç‚¹åˆ—è¡¨

  // æµ‹éªŒå…³è”
  linkedQuizId?: string;
}

export interface Quiz {
  id: string;
  ownerId: string;
  coursewareId: string;
  title: string;
  createdAt: number;

  questions: QuizQuestion[];

  // ç”¨æˆ·ç­”é¢˜è®°å½•ï¼ˆå¯é€‰ï¼‰
  userAnswers?: {
    questionId: string;
    answer: string;
    isCorrect: boolean;
  }[];
}

export interface QuizQuestion {
  id: string;
  knowledgePoint: string;
  difficulty: 'basic' | 'advanced';
  content: string;  // Markdown
  answer: string;  // Markdown
  explanation: string;  // è§£æ
}

// è®²è§£é£æ ¼æšä¸¾
export enum CoursewareStyle {
  RIGOROUS = 'rigorous',      // ä¸¥è°¨å­¦æœ¯
  STORYTELLING = 'storytelling',  // è¶£å‘³æ•…äº‹
  PRACTICE = 'practice',       // ä¹ é¢˜å¯¼å‘
  EXPLORATION = 'exploration'  // æ¢ç´¢å‘ç°
}
```

### 4.2 ä¿®æ”¹ç°æœ‰ç±»å‹

```typescript
// ScannedItem æ–°å¢å­—æ®µ
export interface ScannedItem {
  // ... ç°æœ‰å­—æ®µ

  // æ–°å¢ï¼šAnythingLLMç´¢å¼•çŠ¶æ€
  indexedToAnythingLlm?: boolean;
  anythingLlmDocId?: string;
}
```

---

## 5. ç”¨æˆ·äº¤äº’æµç¨‹

### 5.1 å›¾ä¹¦é¦† - ä¸Šä¼ ä¹¦ç±

```
æ­¥éª¤1: ä¸Šä¼ æ–‡ä»¶
  ç”¨æˆ·åœ¨"å›¾ä¹¦é¦†"æ¨¡å—ç‚¹å‡»"ä¸Šä¼ ä¹¦ç±"
  â†“
  é€‰æ‹© PDF/EPUB/TXT æ–‡ä»¶ï¼ˆæ”¯æŒå¤šé€‰ï¼‰
  â†“
  å‰ç«¯æ˜¾ç¤ºä¸Šä¼ è¿›åº¦æ¡

æ­¥éª¤2: AI åˆ†æä¸äººå·¥æ ¡éªŒ
  æ–‡ä»¶ â†’ Node.js Backend â†’ AnythingLLM è§£æ
  â†“
  å¹¶è¡Œä»»åŠ¡ï¼š
  â”œâ”€ æå–ç›®å½•ç»“æ„ï¼ˆChapterNode[]ï¼‰
  â”œâ”€ ç”Ÿæˆå°é¢ï¼ˆPDFç¬¬ä¸€é¡µæˆªå›¾ï¼‰
  â””â”€ Gemini åˆ†æå…ƒæ•°æ®ï¼ˆåˆæ­¥è¯†åˆ«ï¼‰
  â†“
  å‰ç«¯æ˜¾ç¤º"AIåˆ†æç»“æœ - äººå·¥æ ¡éªŒ"å¯¹è¯æ¡†ï¼ˆå¯ç¼–è¾‘è¡¨å•ï¼‰ï¼š
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ ğŸ“š è¯·ç¡®è®¤è¯†åˆ«ç»“æœï¼ˆå¯ä¿®æ”¹ï¼‰              â”‚
  â”‚                                          â”‚
  â”‚ ä¹¦åï¼š[é«˜ä¸­æ•°å­¦å¿…ä¿®ä¸€_________________]  â”‚
  â”‚ å­¦ç§‘ï¼š[æ•°å­¦ â–¼]                           â”‚
  â”‚ å¹´çº§ï¼š[é«˜ä¸­ â–¼]                           â”‚
  â”‚ ç±»å‹ï¼š[æ•™æ â–¼]                           â”‚
  â”‚ æ ‡ç­¾ï¼š[#å‡½æ•°] [#é›†åˆ] [#ä¸ç­‰å¼] [Ã—]      â”‚
  â”‚       [+ æ·»åŠ æ ‡ç­¾___________]             â”‚
  â”‚ ä½œè€…ï¼š[_____________________________]    â”‚
  â”‚ æ˜¯å¦è®¾ä¸ºå®¶åº­å…±äº«ï¼šâ˜‘ æ˜¯  â—‹ ä»…è‡ªå·±å¯è§    â”‚
  â”‚                                          â”‚
  â”‚ ç›®å½•ç»“æ„é¢„è§ˆï¼ˆAIæå–ï¼Œå¯æŠ˜å æŸ¥çœ‹ï¼‰        â”‚
  â”‚                                          â”‚
  â”‚ [é‡æ–°è¯†åˆ«] [å–æ¶ˆ] [ç¡®è®¤å¹¶ç´¢å¼•]            â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  ç”¨æˆ·æ“ä½œï¼š
  - å¯ç›´æ¥ä¿®æ”¹ä»»ä½•å­—æ®µ
  - ç‚¹å‡»"é‡æ–°è¯†åˆ«"ï¼šé‡æ–°è°ƒç”¨Geminiåˆ†æ
  - ç‚¹å‡»"ç¡®è®¤å¹¶ç´¢å¼•"ï¼šä¿å­˜ä¿®æ”¹åçš„å…ƒæ•°æ® + æ¨é€åˆ°AnythingLLM

æ­¥éª¤3: ç´¢å¼•åˆ° AnythingLLM
  ç”¨æˆ·ç‚¹å‡»"ç¡®è®¤å¹¶ç´¢å¼•"
  â†“
  åå°ä»»åŠ¡ï¼š
  â”œâ”€ å°†å®Œæ•´æ–‡æœ¬æ¨é€åˆ° AnythingLLM
  â”œâ”€ å‘é‡åŒ–ï¼ˆembeddingï¼‰
  â””â”€ æ›´æ–° EBook.indexStatus = 'indexed'
  â†“
  å‰ç«¯æ˜¾ç¤ºåœ¨å›¾ä¹¦é¦†åˆ—è¡¨ï¼ˆå¡ç‰‡è§†å›¾ï¼‰
```

### 5.2 AIå­¦ä¹ å›­åœ° - ç”Ÿæˆè¯¾ä»¶

```
Tab1: ğŸ“š è¯¾ä»¶å­¦ä¹ 

ç•Œé¢å¸ƒå±€ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ­¥éª¤1: é€‰æ‹©å­¦ä¹ èµ„æº                          â”‚
â”‚                                              â”‚
â”‚ [ä¹¦ç±èµ„æº]                                   â”‚
â”‚ é€‰æ‹©ä¹¦ç±ï¼š[é«˜ä¸­æ•°å­¦å¿…ä¿®ä¸€ â–¼]                 â”‚
â”‚                                              â”‚
â”‚ ç« èŠ‚ç›®å½•ï¼ˆå¯å¤šé€‰ï¼‰ï¼š                          â”‚
â”‚ â–¡ ç¬¬ä¸€ç«  é›†åˆä¸å‡½æ•°                          â”‚
â”‚ â˜‘ ç¬¬äºŒç«  åŸºæœ¬åˆç­‰å‡½æ•°                        â”‚
â”‚   â˜‘ 2.1 æŒ‡æ•°å‡½æ•°                             â”‚
â”‚   â˜‘ 2.2 å¯¹æ•°å‡½æ•°                             â”‚
â”‚   â–¡ 2.3 å¹‚å‡½æ•°                               â”‚
â”‚                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [å†å²é”™é¢˜]                                   â”‚
â”‚                                              â”‚
â”‚ ğŸ” æ™ºèƒ½åŒ¹é…ï¼ˆåŸºäºé€‰ä¸­ç« èŠ‚ï¼‰ï¼š                 â”‚
â”‚ â˜‘ 2026-01-15 - æŒ‡æ•°å‡½æ•°å›¾åƒï¼ˆé”™é¢˜ï¼‰          â”‚
â”‚   â””â”€ åŒ¹é…åº¦ï¼šâ˜…â˜…â˜…â˜…â˜†                          â”‚
â”‚ â˜‘ 2026-01-12 - å¯¹æ•°è¿ç®—å…¬å¼ï¼ˆå·²è®¢æ­£ï¼‰        â”‚
â”‚   â””â”€ åŒ¹é…åº¦ï¼šâ˜…â˜…â˜…â˜†â˜†                          â”‚
â”‚                                              â”‚
â”‚ [+ æ‰‹åŠ¨é€‰æ‹©æ›´å¤šé”™é¢˜]  â† ç‚¹å‡»å±•å¼€å®Œæ•´åˆ—è¡¨     â”‚
â”‚   å¼¹å‡ºæ¨¡æ€å¯¹è¯æ¡†ï¼š                            â”‚
â”‚   - æœç´¢æ¡†ï¼šå…³é”®è¯æœç´¢                        â”‚
â”‚   - ç­›é€‰å™¨ï¼šå­¦ç§‘/çŠ¶æ€/æ—¶é—´                    â”‚
â”‚   - ç»“æœåˆ—è¡¨ï¼šæ˜¾ç¤ºæ‰€æœ‰é”™é¢˜ï¼Œæ”¯æŒå¤šé€‰          â”‚
â”‚                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [æœ¬åœ°ç¬”è®°] ï¼ˆå¯é€‰ä¸Šä¼ ï¼‰                       â”‚
â”‚ [ğŸ“ ä¸Šä¼  .md æ–‡ä»¶] æˆ– æ‹–æ‹½åˆ°æ­¤å¤„              â”‚
â”‚ âœ“ å·²æ·»åŠ : æŒ‡æ•°å¯¹æ•°çŸ¥è¯†ç‚¹æ€»ç»“.md [Ã—]          â”‚
â”‚                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ­¥éª¤2: é€‰æ‹©è®²è§£é£æ ¼                          â”‚
â”‚                                              â”‚
â”‚ â—‹ ğŸ“š ä¸¥è°¨å­¦æœ¯ - å®šä¹‰â†’å®šç†â†’è¯æ˜â†’ä¾‹é¢˜          â”‚
â”‚ â— ğŸ¨ è¶£å‘³æ•…äº‹ - ç”Ÿæ´»åœºæ™¯å¼•å…¥ï¼Œå¯“æ•™äºä¹        â”‚
â”‚ â—‹ ğŸ’¡ ä¹ é¢˜å¯¼å‘ - å…¸å‹ä¾‹é¢˜ä¸ºä¸­å¿ƒï¼Œå½’çº³æ–¹æ³•      â”‚
â”‚ â—‹ ğŸ”¬ æ¢ç´¢å‘ç° - å¼•å¯¼æ€è€ƒï¼Œé€æ­¥æ¨å¯¼            â”‚
â”‚                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ç”Ÿæˆè¯¾ä»¶] ï¼ˆé¢„è®¡5-10åˆ†é’Ÿï¼‰                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç”Ÿæˆä¸­ï¼š
  æ˜¾ç¤ºè¿›åº¦åŠ¨ç”»ï¼š
  âœ“ æ£€ç´¢å›¾ä¹¦ç« èŠ‚å†…å®¹...
  âœ“ åˆ†æå†å²é”™é¢˜æ•°æ®...
  â³ Gemini æ·±åº¦æ¨ç†ä¸­...ï¼ˆthinkingBudget: 4096ï¼‰
  â³ ç”ŸæˆçŸ¥è¯†ç‚¹è®²è§£...

ç”Ÿæˆå®Œæˆï¼š
  è·³è½¬åˆ°è¯¾ä»¶é˜…è¯»é¡µé¢
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ ğŸ“„ æŒ‡æ•°å‡½æ•°ä¸å¯¹æ•°å‡½æ•° - è¶£å‘³è®²è§£  â”‚
  â”‚                                  â”‚
  â”‚ [Markdownæ¸²æŸ“çš„è¯¾ä»¶å†…å®¹]          â”‚
  â”‚                                  â”‚
  â”‚ [â¬‡ ä¸‹è½½åˆ°çŸ¥è¯†åº“]                  â”‚
  â”‚ [ğŸ“ ç”Ÿæˆé…å¥—æµ‹éªŒ]                 â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.3 ç”Ÿæˆé…å¥—æµ‹éªŒ

```
ç”¨æˆ·å­¦ä¹ å®Œè¯¾ä»¶åï¼Œç‚¹å‡»"ç”Ÿæˆé…å¥—æµ‹éªŒ"
  â†“
ç³»ç»Ÿåˆ†æï¼š
  - è¯¾ä»¶ä¸­çš„çŸ¥è¯†ç‚¹ï¼š['æŒ‡æ•°å‡½æ•°å®šä¹‰', 'æŒ‡æ•°å‡½æ•°å›¾åƒ', 'å¯¹æ•°è¿ç®—']
  - å†å²é”™é¢˜ä¸­çš„è–„å¼±ç‚¹
  â†“
ç”Ÿæˆè§„åˆ™ï¼ˆæ¯ä¸ªçŸ¥è¯†ç‚¹ï¼‰ï¼š
  - 2é“åŸºç¡€é¢˜ï¼ˆç›´æ¥åº”ç”¨æ¦‚å¿µï¼‰
  - 1é“è¿›é˜¶é¢˜ï¼ˆç»¼åˆåº”ç”¨/å˜å¼ï¼‰
  â†“
ç¤ºä¾‹è¾“å‡ºï¼š
  çŸ¥è¯†ç‚¹1: æŒ‡æ•°å‡½æ•°å®šä¹‰
    - åŸºç¡€é¢˜1: åˆ¤æ–­å‡½æ•°ç±»å‹
    - åŸºç¡€é¢˜2: æ±‚å®šä¹‰åŸŸ
    - è¿›é˜¶é¢˜: å¤åˆå‡½æ•°æ±‚å€¼

  çŸ¥è¯†ç‚¹2: æŒ‡æ•°å‡½æ•°å›¾åƒ
    - åŸºç¡€é¢˜1: è¯†åˆ«å›¾åƒ
    - åŸºç¡€é¢˜2: åˆ¤æ–­å•è°ƒæ€§
    - è¿›é˜¶é¢˜: å›¾åƒå˜æ¢
  â†“
æ˜¾ç¤ºæµ‹éªŒé¡µé¢ï¼š
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ ğŸ“ é…å¥—æµ‹éªŒ - æŒ‡æ•°ä¸å¯¹æ•°å‡½æ•°      â”‚
  â”‚ å…±9é¢˜ï¼ˆ6åŸºç¡€ + 3è¿›é˜¶ï¼‰            â”‚
  â”‚                                  â”‚
  â”‚ [åœ¨çº¿ä½œç­”] [ä¸‹è½½PDF] [ä¿å­˜åˆ°çŸ¥è¯†åº“]â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. æŠ€æœ¯å®ç°ç»†èŠ‚

### 6.1 AnythingLLM é›†æˆ

#### API ç«¯ç‚¹è®¾è®¡

**1. ç´¢å¼•ä¹¦ç±**
```typescript
// POST /api/anythingllm/index-book
{
  bookId: string,
  fileBase64: string,
  fileFormat: 'pdf' | 'epub' | 'txt',
  metadata: {
    title: string,
    subject: string,
    grade: string,
    category: string,
    tags: string[]
  }
}

// è¿”å›
{
  success: true,
  data: {
    anythingLlmDocId: string,
    tableOfContents: ChapterNode[]
  }
}
```

**2. ç´¢å¼•é”™é¢˜**
```typescript
// POST /api/anythingllm/index-scanned-item
{
  scannedItem: ScannedItem
}

// è¿”å›
{
  success: true,
  data: {
    anythingLlmDocId: string
  }
}
```

**3. RAG æ£€ç´¢**
```typescript
// POST /api/anythingllm/search
{
  query: string,  // "äºŒæ¬¡å‡½æ•°ç›¸å…³çŸ¥è¯†ç‚¹"
  filters: {
    subject?: string,
    source?: ('library' | 'scanned_item')[]
  }
}

// è¿”å›
{
  success: true,
  data: [
    {
      text: string,  // æ–‡æ¡£ç‰‡æ®µ
      metadata: any,
      score: number  // ç›¸å…³æ€§å¾—åˆ†
    }
  ]
}
```

### 6.2 è¯¾ä»¶ç”Ÿæˆ API

```typescript
// POST /api/generate-courseware-v2
{
  selectedChapters: [{
    bookId: string,
    bookTitle: string,
    chapterTitle: string,
    chapterId: string
  }],
  selectedWrongProblems: string[],  // ScannedItem.id[]
  uploadedNotes: string[],  // Markdownå†…å®¹
  style: 'rigorous' | 'storytelling' | 'practice' | 'exploration',
  studentName: string
}

// è¿”å›
{
  success: true,
  data: {
    title: string,
    content: string,  // Markdown
    knowledgePoints: string[]
  }
}
```

**å®ç°é€»è¾‘**:
1. ä» AnythingLLM æ£€ç´¢å›¾ä¹¦ç« èŠ‚å†…å®¹
2. ä» AnythingLLM æ£€ç´¢é”™é¢˜å†…å®¹
3. ç»„è£…ä¸Šä¸‹æ–‡ï¼ˆæ§åˆ¶ token <200kï¼‰
4. æ ¹æ®é£æ ¼æ„é€  System Instruction
5. è°ƒç”¨ Gemini 3 Pro (thinkingBudget: 4096)
6. æå–çŸ¥è¯†ç‚¹åˆ—è¡¨

### 6.3 æµ‹éªŒç”Ÿæˆ API

```typescript
// POST /api/generate-quiz
{
  coursewareId: string,
  knowledgePoints: string[],
  wrongProblems: [{
    chapter: string,
    problemSummary: string
  }],
  studentName: string
}

// è¿”å›
{
  success: true,
  data: {
    questions: [{
      id: string,
      knowledgePoint: string,
      difficulty: 'basic' | 'advanced',
      content: string,  // Markdown
      answer: string,
      explanation: string
    }]
  }
}
```

**ç”Ÿæˆè§„åˆ™**:
- æ¯ä¸ªçŸ¥è¯†ç‚¹ 3 é“é¢˜ï¼ˆ2åŸºç¡€ + 1è¿›é˜¶ï¼‰
- åŸºç¡€é¢˜ç´§æ‰£æ¦‚å¿µï¼Œè¿›é˜¶é¢˜ç»¼åˆåº”ç”¨
- æ¯é¢˜åŒ…å«è¯¦ç»†è§£æ

---

## 7. éƒ¨ç½²æ¶æ„

### 7.1 Docker Compose é…ç½®

```yaml
version: '3.8'

services:
  # Nginx åå‘ä»£ç†
  nginx:
    image: nginx:alpine
    container_name: hl-nginx
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf:ro
      - ./frontend/dist:/usr/share/nginx/html:ro
    depends_on:
      - backend
    restart: unless-stopped

  # Node.js åç«¯
  backend:
    build: ./backend
    container_name: hl-backend
    ports:
      - "3000:3000"
    environment:
      - NODE_ENV=production
      - GEMINI_API_KEY=${GEMINI_API_KEY}
      - ANYTHINGLLM_ENDPOINT=http://anythingllm:3001
      - ANYTHINGLLM_API_KEY=${ANYTHINGLLM_API_KEY}
    depends_on:
      - anythingllm
    restart: unless-stopped

  # AnythingLLM
  anythingllm:
    image: mintplexlabs/anythingllm:latest
    container_name: hl-anythingllm
    ports:
      - "3001:3001"
    volumes:
      - ./anythingllm-storage:/app/server/storage
    environment:
      - LLM_PROVIDER=gemini
      - GEMINI_API_KEY=${GEMINI_API_KEY}
      - EMBEDDING_ENGINE=gemini
      - VECTOR_DB=lancedb
      - AUTH_TOKEN=${ANYTHINGLLM_API_KEY}
      # ä¼˜åŒ– 2æ ¸4G é…ç½®
      - CHUNK_SIZE=800
      - CHUNK_OVERLAP=150
    restart: unless-stopped
    deploy:
      resources:
        limits:
          memory: 2G
```

### 7.2 Nginx é…ç½®

```nginx
events {
    worker_connections 1024;
}

http {
    include /etc/nginx/mime.types;
    gzip on;
    client_max_body_size 50M;

    server {
        listen 80;

        # å‰ç«¯é™æ€æ–‡ä»¶
        location / {
            root /usr/share/nginx/html;
            try_files $uri /index.html;
        }

        # API ä»£ç†
        location /api/ {
            proxy_pass http://backend:3000;
            proxy_set_header Host $host;

            # AI ç”Ÿæˆè¶…æ—¶è®¾ç½®
            proxy_connect_timeout 600s;
            proxy_read_timeout 600s;
        }
    }
}
```

### 7.3 éƒ¨ç½²æ­¥éª¤

```bash
# 1. æœåŠ¡å™¨å‡†å¤‡
sudo apt update && sudo apt upgrade -y
curl -fsSL https://get.docker.com | bash
sudo apt install docker-compose -y

# 2. å…‹éš†ä»£ç 
git clone <repo-url>
cd home-learning-os

# 3. é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
nano .env  # å¡«å†™ GEMINI_API_KEY

# 4. æ‰§è¡Œéƒ¨ç½²
chmod +x deploy.sh
./deploy.sh

# 5. éªŒè¯
curl http://localhost/api/health
```

---

## 8. æ•°æ®æŒä¹…åŒ–ä¸åŒæ­¥

### 8.1 å‰ç«¯æŒä¹…åŒ–ï¼ˆIndexedDBï¼‰

```typescript
// services/storageService.ts

class DatabaseService {
  private db: IDBDatabase | null = null;

  async init() {
    const request = indexedDB.open('HomeLearningOS', 1);

    request.onupgradeneeded = (event: any) => {
      const db = event.target.result;

      if (!db.objectStoreNames.contains('scannedItems')) {
        db.createObjectStore('scannedItems', { keyPath: 'id' });
      }
      if (!db.objectStoreNames.contains('books')) {
        db.createObjectStore('books', { keyPath: 'id' });
      }
      if (!db.objectStoreNames.contains('coursewares')) {
        db.createObjectStore('coursewares', { keyPath: 'id' });
      }
    };
  }

  async saveScannedItem(item: ScannedItem) { /* ... */ }
  async loadAllScannedItems(): Promise<ScannedItem[]> { /* ... */ }
  // ç±»ä¼¼æ–¹æ³•ç”¨äº books å’Œ coursewares
}
```

### 8.2 AnythingLLM è‡ªåŠ¨åŒæ­¥

**åŒæ­¥æ—¶æœº**:
1. OCR é”™é¢˜ä¿å­˜åè‡ªåŠ¨æ¨é€
2. ä¹¦ç±ä¸Šä¼ åè‡ªåŠ¨ç´¢å¼•
3. é™é»˜å¤±è´¥ï¼Œä¸å½±å“ç”¨æˆ·ä½“éªŒ

```typescript
// OCR é”™é¢˜ä¿å­˜æ—¶
const handleScanComplete = async (item: ScannedItem) => {
  setScannedItems(prev => [item, ...prev]);

  // åå°è‡ªåŠ¨æ¨é€åˆ° AnythingLLM
  try {
    const response = await fetch('/api/anythingllm/index-scanned-item', {
      method: 'POST',
      body: JSON.stringify({ scannedItem: item })
    });

    if (response.ok) {
      const { anythingLlmDocId } = await response.json();
      // æ›´æ–°ç´¢å¼•çŠ¶æ€
    }
  } catch (error) {
    console.error('Failed to index', error);
    // é™é»˜å¤±è´¥
  }
};
```

### 8.3 Markdown æ–‡ä»¶ä¸‹è½½

```typescript
// components/shared/MarkdownDownloader.tsx

const MarkdownDownloader = ({ content, filename, frontmatter, suggestedPath }) => {
  const handleDownload = () => {
    // æ„é€ å®Œæ•´ Markdownï¼ˆå« Frontmatterï¼‰
    let fullContent = '';

    if (frontmatter) {
      fullContent += '---\n';
      Object.entries(frontmatter).forEach(([key, value]) => {
        fullContent += `${key}: ${value}\n`;
      });
      fullContent += '---\n\n';
    }

    fullContent += content;

    // è§¦å‘ä¸‹è½½
    const blob = new Blob([fullContent], { type: 'text/markdown' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = filename;
    a.click();

    // æç¤ºå»ºè®®è·¯å¾„
    if (suggestedPath) {
      alert(`âœ… æ–‡ä»¶å·²ä¸‹è½½\n\nå»ºè®®ä¿å­˜è·¯å¾„ï¼š\n${suggestedPath}`);
    }
  };

  return (
    <button onClick={handleDownload}>
      <i className="fa-solid fa-download"></i> ä¸‹è½½åˆ°çŸ¥è¯†åº“
    </button>
  );
};
```

---

## 9. å®ç°è·¯çº¿å›¾

### é˜¶æ®µ 1: åŸºç¡€æ¶æ„æ­å»ºï¼ˆ1å‘¨ï¼‰

**ä»»åŠ¡**:
- åˆ›å»º backend/ ç›®å½•ç»“æ„
- å®ç° Express æœåŠ¡å™¨
- è¿ç§»ç°æœ‰ API åˆ° Express è·¯ç”±
- å®ç° AnythingLLM ä»£ç†æ¥å£
- ç¼–å†™ Docker Compose é…ç½®
- æœ¬åœ°æµ‹è¯•å®Œæ•´éƒ¨ç½²æµç¨‹

**éªŒæ”¶æ ‡å‡†**:
- âœ… `docker-compose up -d` æˆåŠŸå¯åŠ¨
- âœ… è®¿é—® `/api/health` è¿”å› 200
- âœ… ç°æœ‰æ‹é¢˜åŠŸèƒ½æ­£å¸¸ï¼ˆå›å½’æµ‹è¯•ï¼‰

### é˜¶æ®µ 2: å›¾ä¹¦é¦†æ¨¡å—ï¼ˆ1.5å‘¨ï¼‰

**ä»»åŠ¡**:
- å‰ç«¯ç»„ä»¶ï¼šLibraryHubã€BookUploaderã€BookCardã€BookMetadataEditor
- åç«¯æœåŠ¡ï¼šupload-bookã€extract-tocã€Gemini å…ƒæ•°æ®åˆ†æ
- PDF/EPUB/TXT è§£æ
- AnythingLLM é›†æˆ
- IndexedDB æŒä¹…åŒ–

**éªŒæ”¶æ ‡å‡†**:
- âœ… å¯ä¸Šä¼  PDF/EPUB/TXTï¼ˆ<100MBï¼‰
- âœ… AI å…ƒæ•°æ®è¯†åˆ«å‡†ç¡®ç‡ >80%
- âœ… ç›®å½•æ ‘æ­£ç¡®æ˜¾ç¤º
- âœ… æˆåŠŸç´¢å¼•åˆ° AnythingLLM
- âœ… é¡µé¢åˆ·æ–°æ•°æ®ä¸ä¸¢å¤±

### é˜¶æ®µ 3: è¯¾ä»¶ç”Ÿæˆï¼ˆ2å‘¨ï¼‰

**ä»»åŠ¡**:
- StudyGarden ç»„ä»¶ï¼ˆé‡æ„ ExamCenterï¼‰
- CoursewareGeneratorï¼ˆä¹¦ç±é€‰æ‹©ã€ç« èŠ‚æ ‘ã€é”™é¢˜é€‰æ‹©ã€é£æ ¼é€‰æ‹©ï¼‰
- CoursewareViewerï¼ˆMarkdown æ¸²æŸ“ã€ä¸‹è½½ï¼‰
- generate-courseware-v2 API
- 4ç§è®²è§£é£æ ¼ Prompt è®¾è®¡

**éªŒæ”¶æ ‡å‡†**:
- âœ… å¯é€‰æ‹©ä¹¦ç±ç« èŠ‚
- âœ… æ™ºèƒ½åŒ¹é…é”™é¢˜ï¼ŒåŒ¹é…åº¦åˆç†
- âœ… 4ç§é£æ ¼è¯¾ä»¶é£æ ¼æ˜æ˜¾ä¸åŒ
- âœ… ç”Ÿæˆæ—¶é—´ <10åˆ†é’Ÿ
- âœ… å¯ä¸‹è½½ä¸º Markdownï¼ˆå« Frontmatterï¼‰

### é˜¶æ®µ 4: æµ‹éªŒç”Ÿæˆï¼ˆ1å‘¨ï¼‰

**ä»»åŠ¡**:
- QuizGenerator ç»„ä»¶
- QuizViewerï¼ˆé¢˜ç›®å±•ç¤ºã€LaTeX æ”¯æŒï¼‰
- generate-quiz API
- æµ‹éªŒä¸‹è½½åŠŸèƒ½

**éªŒæ”¶æ ‡å‡†**:
- âœ… ç”Ÿæˆæ—¶é—´ 3-5åˆ†é’Ÿ
- âœ… é¢˜ç›®æ•°é‡ = çŸ¥è¯†ç‚¹æ•° Ã— 3
- âœ… åŸºç¡€é¢˜/è¿›é˜¶é¢˜éš¾åº¦åˆç†
- âœ… æ”¯æŒ LaTeX å…¬å¼

### é˜¶æ®µ 5: ä¼˜åŒ–ä¸éƒ¨ç½²ï¼ˆ1.5å‘¨ï¼‰

**ä»»åŠ¡**:
- IndexedDB å®Œå–„
- OCR é”™é¢˜è‡ªåŠ¨ç´¢å¼•
- å‰ç«¯æ€§èƒ½ä¼˜åŒ–ï¼ˆä»£ç åˆ†å‰²ã€å›¾ç‰‡å‹ç¼©ï¼‰
- AnythingLLM å†…å­˜ä¼˜åŒ–
- äº‘æœåŠ¡å™¨éƒ¨ç½²
- ç”Ÿäº§ç¯å¢ƒæµ‹è¯•

**éªŒæ”¶æ ‡å‡†**:
- âœ… é¡µé¢åˆ·æ–°æ•°æ®å®Œæ•´ä¿ç•™
- âœ… OCR é”™é¢˜ 30ç§’å†…è‡ªåŠ¨ç´¢å¼•
- âœ… 2æ ¸4G å†…å­˜å ç”¨ <80%
- âœ… å‰ç«¯é¦–å±åŠ è½½ <3ç§’
- âœ… æ‰€æœ‰å®¹å™¨æ­£å¸¸è¿è¡Œ

**æ€»å·¥ä½œé‡**: 7å‘¨

---

## 10. é£é™©ä¸åº”å¯¹

| é£é™© | å½±å“ | åº”å¯¹æ–¹æ¡ˆ |
|------|------|----------|
| AnythingLLM åœ¨ 2æ ¸4G æœåŠ¡å™¨ä¸Šæ€§èƒ½ä¸è¶³ | é«˜ | 1. é™åˆ¶å‘é‡åº“å¤§å°<br>2. é™ä½ chunk_size<br>3. è€ƒè™‘å‡çº§åˆ° 4æ ¸8G |
| PDF ç›®å½•æå–ä¸å‡†ç¡® | ä¸­ | æä¾›æ‰‹åŠ¨ç¼–è¾‘ç›®å½•åŠŸèƒ½ |
| Gemini API é…é¢è€—å°½ | é«˜ | 1. å®ç°è¯·æ±‚ç¼“å­˜<br>2. æ·»åŠ é…é¢ç›‘æ§é¢„è­¦ |
| è¯¾ä»¶ç”Ÿæˆæ—¶é—´è¿‡é•¿ï¼ˆ>10åˆ†é’Ÿï¼‰ | ä¸­ | 1. é™åˆ¶ä¸Šä¸‹æ–‡é•¿åº¦<br>2. ä¼˜åŒ– Prompt<br>3. æ·»åŠ è¿›åº¦åé¦ˆ |
| ç”¨æˆ·æ•°æ®ä¸¢å¤± | é«˜ | 1. å®ç°è‡ªåŠ¨å¤‡ä»½<br>2. æä¾›æ•°æ®å¯¼å‡ºåŠŸèƒ½ |

---

## é™„å½•ï¼šæ ¸å¿ƒä»·å€¼ä¸æŠ€æœ¯äº®ç‚¹

### æ ¸å¿ƒä»·å€¼

1. **æ•°æ®ä¸»æƒ**: ç”¨æˆ·å­¦ä¹ æ•°æ®ä»¥æ ‡å‡† Markdown æ ¼å¼å­˜å‚¨æœ¬åœ°ï¼Œæ°¸ä¹…å¯è¯»ï¼Œä¸è¢«ä»»ä½•è½¯ä»¶ç»‘å®š
2. **AI å¢å¼º**: åˆ©ç”¨ Gemini 3 + AnythingLLM å®ç°æ™ºèƒ½è¯¾ä»¶ç”Ÿæˆå’Œ RAG æ£€ç´¢
3. **å­¦ä¹ é—­ç¯**: å›¾ä¹¦é¦† â†’ è¯¾ä»¶å­¦ä¹  â†’ é…å¥—æµ‹éªŒ â†’ é”™é¢˜å½’æ¡£ â†’ å†æ¬¡ç”Ÿæˆè¯¾ä»¶
4. **è½»é‡éƒ¨ç½²**: å•æœåŠ¡å™¨ 2æ ¸4G å³å¯è¿è¡Œå®Œæ•´ç³»ç»Ÿ
5. **æŠ€æœ¯æ ˆç»Ÿä¸€**: å…¨é“¾è·¯ä½¿ç”¨ Gemini APIï¼Œé™ä½ç»´æŠ¤æˆæœ¬

### æŠ€æœ¯äº®ç‚¹

- **å‘é‡åŒ–çŸ¥è¯†åº“**: AnythingLLM å®ç°è¯­ä¹‰æ£€ç´¢ï¼Œç²¾å‡†å®šä½ç›¸å…³å†…å®¹
- **å¤šæºæ•°æ®èåˆ**: å›¾ä¹¦ç« èŠ‚ + OCR é”™é¢˜ + æ‰‹å†™ç¬”è®°ä¸‰åˆä¸€
- **é£æ ¼åŒ–ç”Ÿæˆ**: 4ç§è®²è§£é£æ ¼é€‚åº”ä¸åŒå­¦ç”Ÿ
- **æ¸è¿›å¼æµ‹éªŒ**: 2åŸºç¡€+1è¿›é˜¶çš„ç§‘å­¦é¢˜é‡é…ç½®
- **å®¹å™¨åŒ–éƒ¨ç½²**: Docker Compose ä¸€é”®éƒ¨ç½²ï¼Œç¯å¢ƒéš”ç¦»

---

**æ–‡æ¡£ç»“æŸ**
